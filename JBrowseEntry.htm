<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<title>Tk/JBrowseEntry.pm</title>
<link rev="made" href="mailto:root@localhost" />
</head>

<body style="background-color: white">

<p><a name="__index__"></a></p>
<!-- INDEX BEGIN -->

<ul>

	<li><a href="#name">NAME</a></li>
	<li><a href="#description">DESCRIPTION</a></li>
	<li><a href="#options">OPTIONS</a></li>
	<li><a href="#examples">EXAMPLES</a></li>
</ul>
<!-- INDEX END -->

<hr />
<p>
</p>
<h1><a name="name">NAME</a></h1>
<p>JBrowseEntry is a full-featured ``Combo-box'' (Text-entry combined with drop-down 
listbox).</p>
<p>
</p>
<hr />
<h1><a name="description">DESCRIPTION</a></h1>
<p>JBrowseEntry widgets allow one to specify a full combo-box, a ``readonly'' 
box (text field allows user to type the 1st letter of an item to search for, 
but user may only ultimately select one of the items in the list), or a 
``textonly'' version (drop-down list disabled), or a completely disabled 
widget.</p>
<p>This widget is similar to other combo-boxes, ie. 	JComboBox, but has good 
keyboard bindings and allows for quick lookup/search within the listbox. 
pressing &lt;RETURN&gt; in entry field displays the dropdown box with the 
first entry most closly matching whatever's in the entry field highlighted. 
Pressing &lt;RETURN&gt; or &lt;SPACE&gt; in the listbox 
selects the highlighted entry and copies it to the text field and removes the 
listbox.  &lt;ESC&gt; removes the listbox from view.  
&lt;UP&gt; and &lt;DOWN&gt; arrows work the listbox as well as pressing a key, which will 
move the highlight to the next item starting with that letter/number, etc. 
&lt;UP&gt; and &lt;DOWN&gt; arrows pressed within the entry field circle through the 
various list options as well (unless ``-state'' is set to 'textonly').  
Set ``-state'' to ``text'' to disable the dropdown list, but allow &lt;UP&gt; and 
&lt;DOWN&gt; to cycle among the choices.  Setting ``-state'' to 'textonly' completely 
hides the choices list from the user - he must type in his choice just like 
a normal entry widget.</p>
<p>One may also specify whether or not the button which activates the 
dropdown list via the mouse can take focus or not (-btntakesfocus) or 
whether the widget itself can take focus or is skipped in the focusing 
order.  The developer can also specify alternate bitmap images for the 
button (-arrowimage and -farrowimage).  The developer can also specify the 
maximum length of the dropdown list such that if more than that number of 
items is added, a vertical scrollbar is automatically added (-height).  
A fixed width in characters (-width) can be specified, or the widget can be 
allowed to resize itself to the width of the longest string in the list.  The 
listbox and text entry field are automatically kept to the same width.</p>
<p>One can optionally specify a label (-label), similar to the ``LabEntry'' widget.  
By default, the label appears packed to the left of the widget.  The 
positioning can be specified via the ``-labelPack'' option.  For example, to 
position the label above the widget, use ``-labelPack =&gt; [-side =&gt; 'top']''.</p>
<p>
</p>
<hr />
<h1><a name="options">OPTIONS</a></h1>
<p>JBrowseEntry supports 5 different states:</p>
<dl>
<dt><strong><a name="item_normal"><code>normal</code></a></strong><br />
</dt>
<dd>
-state =&gt; 'normal'
</dd>
<dd>
<p>Default operation -- Both text entry field and dropdown list button function normally.
</p>
</dd>
<dd>
<pre>

=item C&lt;readonly&gt;</pre>
</dd>
<dd>
<p>-state =&gt; 'readonly'</p>
</dd>
<dd>
<p>Dropdown list functions normally. When text entry field has focus, user may type in a letter, and the dropdown list immediately drops down and the first/ next matching item becomes highlighted. The user must ultimately select from the list of valid entries and may not enter anything else.</p>
</dd>
<p></p>
<dt><strong><a name="item_text"><code>text</code></a></strong><br />
</dt>
<dd>
-state =&gt; 'text'
</dd>
<dd>
<p>Text entry functions normally, but dropdown list button is disabled. User must type in an entry or use the up and down arrows to choose from among the list items.</p>
</dd>
<p></p>
<dt><strong><a name="item_textonly"><code>textonly</code></a></strong><br />
</dt>
<dd>
-state =&gt; 'textonly'
</dd>
<dd>
<p>Similar to ``text'': Text entry functions normally, but dropdown list button is disabled. User must type in an entry. The list choices are completely hidden from the user.</p>
</dd>
<p></p>
<dt><strong><a name="item_disabled"><code>disabled</code></a></strong><br />
</dt>
<dd>
-state =&gt; 'disabled'
</dd>
<dd>
<p>Widget is completely disabled and greyed out. It will not activate or take focus.</p>
</dd>
<p></p></dl>
<p>JBrowseEntry supports all the options that BrowseEntry supports with the addition of the following options:</p>
<dl>
<dt><strong><a name="item__2dbtntakesfocus"><code>-btntakesfocus</code></a></strong><br />
</dt>
<dd>
The dropdown list button is normally activated with the mouse and is skipped in the focusing circuit. If this option is set, then the button will take keyboard focus. Pressing &lt;Return&gt;, &lt;Spacebar&gt;, or &lt;Downarrow&gt; will cause the list to be dropped down, repeating causes the list to be removed again. Normally, the text entry widget receives the keyboard focus. This option can be used in combination with ``-takefocus'' so that either the text entry widget, the button, or both or neither receive keyboard focus. If both options are set, the entry field first receives focus, then pressing &lt;Tab&gt; causes the button to be focused.
</dd>
<p></p>
<dt><strong><a name="item__2ddeleteitemsok"><code>-deleteitemsok</code></a></strong><br />
</dt>
<dd>
If set, allows user to delete individual items in the drop-down list by pressing the &lt;Delete&gt; key to delete the current (active) item.
</dd>
<p></p>
<dt><strong><a name="item__2dfarrowimage"><code>-farrowimage</code></a></strong><br />
</dt>
<dd>
Allows one to specify a second alternate bitmap for the image on the button which activates the dropdown list when the button has the keyboard focus. The default is to use the ``-arrowimage'' image. This option should only be specified if the ``-arrowimage'' option is also specified. See the ``-arrowimage'' option under Standard BrowseEntry options for more details.
</dd>
<p></p>
<dt><strong><a name="item__2dheight"><code>-height</code></a></strong><br />
</dt>
<dd>
Specify the maximum number of items to be displayed in the listbox before a vertical scrollbar is automatically added. Default is infinity (listbox will not be given a scrollbar regardless of the number of items added).
</dd>
<p></p>
<dt><strong><a name="item__2dlabelpack"><code>-labelPack</code></a></strong><br />
</dt>
<dd>
Specify alternate packing options for the label. The default is: ``[-side =&gt; 'left', -anchor =&gt; 'e']''. The argument is an arrayref. Note: if no label is specified, none is packed or displayed.
</dd>
<p></p>
<dt><strong><a name="item__2dlistfont"><code>-listfont</code></a></strong><br />
</dt>
<dd>
Specify an alternate font for the text in the listbox. Use ``-font'' to change the text of the text entry field. For best results, ``-font'' and ``-listfont'' should specify fonts of similar size.
</dd>
<p></p>
<dt><strong><a name="item__2dnoselecttext"><code>-noselecttext</code></a></strong><br />
</dt>
<dd>
Normally, when the widget has the focus, the current value is ``selected'' (highlighted and in the cut-buffer). Some consider this unattractive in appearance, particularly with the ``readonly'' state, which appears as a raised button in Unix, similar to an ``Optionmenu''. Setting this option will cause the text to not be selected.
</dd>
<p></p>
<dt><strong><a name="item__2dwidth"><code>-width</code></a></strong><br />
</dt>
<dd>
The number of characters (average if proportional font used) wide to make the entry field. The dropdown list will be set the same width as the entry widget plus the width of the button. If not specified, the default is to calculate the width to the width of the longest item in the choices list and if items are later added or removed the width will be recalculated.
</dd>
<p></p></dl>
<p>Standard BrowseEntry options alsu supported by JBrowseEntry:</p>
<dl>
<dt><strong><a name="item__2dlistwidth"><code>-listwidth</code></a></strong><br />
</dt>
<dd>
Specifies the width of the popup listbox.
</dd>
<p></p>
<dt><strong><a name="item__2dvariable"><code>-variable</code></a></strong><br />
</dt>
<dd>
Specifies the variable in which the entered value is to be stored.
</dd>
<p></p>
<dt><strong><a name="item__2dbrowsecmd"><code>-browsecmd</code></a></strong><br />
</dt>
<dd>
Specifies a function to call when a selection is made in the popped up listbox. It is passed the widget and the text of the entry selected. This function is called after the entry variable has been assigned the value.
</dd>
<p></p>
<dt><strong><a name="item__2dlistcmd"><code>-listcmd</code></a></strong><br />
</dt>
<dd>
Specifies the function to call when the button next to the entry is pressed to popup the choices in the listbox. This is called before popping up the listbox, so can be used to populate the entries in the listbox.
</dd>
<p></p>
<dt><strong><a name="item__2dlistrelief"><code>-listrelief</code></a></strong><br />
</dt>
<dd>
Specifies relief for the dropdown list (default is ``sunken'').
</dd>
<p></p>
<dt><strong><a name="item__2dmaxwidth"><code>-maxwidth</code></a></strong><br />
</dt>
<dd>
Specifies the maximum width the entry and listbox widgets can expand to in characters. The default is zero, meaning expand to the width to accomodate the widest string in the list.
</dd>
<p></p>
<dt><strong><a name="item__2dtabcomplete"><code>-tabcomplete</code></a></strong><br />
</dt>
<dd>
If set to ``1'', pressing the ``&lt;Tab&gt;'' key will cause the string in the entry field to be ``auto-completed'' to the next matching item in the list. If there is no match, the typed text is not changed. If it already matches a list item, then the listbox is removed from view and keyboard focus transfers to the next widget. If set to ``2'' and there is no match in the list, then entry is set to the default value or empty string.
</dd>
<p></p>
<dt><strong><a name="item__2darrowimage"><code>-arrowimage</code></a></strong><br />
</dt>
<dd>
Specifies the image to be used in the arrow button beside the entry widget. The default is an downward arrow image in the file cbxarrow.xbm
</dd>
<p></p>
<dt><strong><a name="item__2dchoices"><code>-choices</code></a></strong><br />
</dt>
<dd>
Specifies the list of choices to pop up. This is a reference to an array of strings specifying the choices.
</dd>
<p></p>
<dt><strong><a name="item__2dstate"><code>-state</code></a></strong><br />
</dt>
<dd>
Specifies one of four states for the widget: ``normal'', ``readonly'', ``textonly'', or ``disabled''. If the widget is ``disabled'' then the value may not be changed and the arrow button won't activate. If the widget is ``readonly'', the entry may not be edited, but it may be changed by choosing a value from the popup listbox. ``textonly'' means the listbox will not activate. ``normal'' is the default.
</dd>
<p></p>
<dt><strong><a name="item__2dcolorstate"><code>-colorstate</code></a></strong><br />
</dt>
<dd>
Depreciated -- Appears to force the background of the entry widget on the Unix version to ``grey95'' if state is normal and a ``-background'' color is not specified.
</dd>
<p></p></dl>
<p>Additional options tested and known to work as expected:</p>
<dl>
<dt><strong><a name="item__2daltbinding"><code>-altbinding</code></a></strong><br />
</dt>
<dd>
Allows one to specify alternate binding schema for certain keys.
Currently valid values are ``Return=Next'' (which causes pressing the 
[Return] key to advance the focus to the next widget in the main window); 
and ``Down=Popup'', which causes the [Down-arrow] key to pop up the selection 
listbox.
</dd>
<p></p></dl>
<p>
</p>
<hr />
<h1><a name="examples">EXAMPLES</a></h1>
<pre>
 It is easiest to illustrate this widget's capabilities via examples:
 
 use Tk;
 use Tk::JBrowseEntry;
 
 $MainWin = MainWindow-&gt;new;
 
 #SET UP SOME DEFAULT VALUES.
 
 $dbname1 = 'cows';
 $dbname2 = 'foxes';
 $dbname3 = 'goats';
 $dbname5 = 'default';
 
 #HERE'S A NORMAL COMBO-BOX.
 
 $jb1 = $MainWin-&gt;JBrowseEntry(
        -label =&gt; 'Normal:',
        -variable =&gt; \$dbname1,
        -state =&gt; 'normal',
        -choices =&gt; [qw(pigs cows foxes goats)],
        -width  =&gt; 12);
 $jb1-&gt;pack(
        -side   =&gt; 'top', -pady =&gt; '10', -anchor =&gt; 'w');
 
 #THIS ONE HAS THE DROPDOWN LIST DISABLED.
 
 $jb2 = $MainWin-&gt;JBrowseEntry(
        -label =&gt; 'TextOnly:',
        -variable =&gt; \$dbname2,
        -state =&gt; 'text',
        -choices =&gt; [qw(pigs cows foxes goats)],
        -width  =&gt; 12);
 $jb2-&gt;pack(
        -side   =&gt; 'top', -pady =&gt; '10', -anchor =&gt; 'w');
 
 #THIS ONE'S &quot;READONLY&quot; (USER MUST PICK FROM THE LIST, TEXT BOX ALLOWS QUICK 
 #SEARCH.
 
 $jb3 = $MainWin-&gt;JBrowseEntry(
        -label =&gt; 'ReadOnly:',
        -variable =&gt; \$dbname3,
        -choices =&gt; [qw(pigs cows foxes goats)],
        -state =&gt; 'readonly',
        -width  =&gt; 12);
 $jb3-&gt;pack(
        -side   =&gt; 'top', -pady =&gt; '10', -anchor =&gt; 'w');
 
 #THIS ONE'S COMPLETELY DISABLED!
 
 $jb4 = $MainWin-&gt;JBrowseEntry(
        -label =&gt; 'Disabled:',
        -variable =&gt; \$dbname3,
        -state =&gt; 'disabled',
        -choices =&gt; [qw(pigs cows foxes goats)],
        -width  =&gt; 12);
 $jb4-&gt;pack(
        -side   =&gt; 'top', -pady =&gt; '10', -anchor =&gt; 'w');
 
 #HERE'S ONE WITH A SCROLLBAR (NOTE THE &quot;-height&quot; ATTRIBUTE).
 
 $jb5 = $MainWin-&gt;JBrowseEntry(
        -label =&gt; 'Scrolled List:',
        -width =&gt; 12,
        -default =&gt; $dbname5,
        -height =&gt; 4,
        -variable =&gt; \$dbname5,
        -browsecmd =&gt; sub {print &quot;-browsecmd!\n&quot;;},
        -listcmd =&gt; sub {print &quot;-listcmd!\n&quot;;},
        -state =&gt; 'normal',
        -choices =&gt; [qw(pigs cows foxes goats horses sheep dogs cats ardvarks default)]);
 $jb5-&gt;pack(
        -side   =&gt; 'top', -pady =&gt; '10', -anchor =&gt; 'w');
 
 #HERE'S ONE THAT THE BUTTON TAKES KEYBOARD FOCUS.
 
 $jb6 = $MainWin-&gt;JBrowseEntry(
        -label =&gt; 'Button Focus:',
        -btntakesfocus =&gt; 1,
        -arrowimage =&gt; $MainWin-&gt;Getimage('balArrow'),   #SPECIFY A DIFFERENT BUTTON IMAGE.
        -farrowimage =&gt; $MainWin-&gt;Getimage('cbxarrow'),  #OPTIONAL 2ND IMAGE FOR BUTTON WHEN FOCUSED. 
        -width =&gt; 12,
        -height =&gt; 4,
        -variable =&gt; \$dbname6,
        -browsecmd =&gt; sub {print &quot;-browsecmd!\n&quot;;},
        -listcmd =&gt; sub {print &quot;-listcmd!\n&quot;;},
        -state =&gt; 'normal',
        -choices =&gt; [qw(pigs cows foxes goats horses sheep dogs cats ardvarks default)]);
 $jb6-&gt;pack(
        -side   =&gt; 'top', -pady =&gt; '10', -anchor =&gt; 'w');
 
 #HERE'S ONE THAT DOWS NOT TAKE KEYBOARD FOCUS.
 
 $jb7 = $MainWin-&gt;JBrowseEntry(
        -label =&gt; 'Skip Focus:',
        -takefocus =&gt; 0,
        -width =&gt; 12,
        -height =&gt; 4,
        -variable =&gt; \$dbname7,
        -browsecmd =&gt; sub {print &quot;-browsecmd!\n&quot;;},
        -listcmd =&gt; sub {print &quot;-listcmd!\n&quot;;},
        -state =&gt; 'normal',
        -choices =&gt; [qw(pigs cows foxes goats horses sheep dogs cats ardvarks default)]);
 $jb7-&gt;pack(
        -side   =&gt; 'top', -pady =&gt; '10', -anchor =&gt; 'w');
 
 $jb7-&gt;choices([qw(First Second Fifth Sixth)]);   #REPLACE LIST CHOICES!
 $jb7-&gt;insert(2, 'Third', 'Fourth');              #ADD MORE AFTER 1ST 2.
 $jb7-&gt;insert('end', [qw(Seventh Oops Eighth)]);  #ADD STILL MORE AT END.
 $jb7-&gt;delete(7);                                 #REMOVE ONE.
 
 $b = $MainWin-&gt;Button(-text =&gt; 'Quit', -command =&gt; sub {exit(); });
 $b-&gt;pack(-side =&gt; 'top');
 $jb1-&gt;focus;   #PICK ONE TO START WITH KEYBOARD FOCUS.
 
 MainLoop;</pre>

</body>

</html>
